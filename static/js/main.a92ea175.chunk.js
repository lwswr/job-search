(this["webpackJsonpjob-search"]=this["webpackJsonpjob-search"]||[]).push([[0],{27:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var i,o,c,a,r,s,p,d,l,u,b,j,x,h,f,v,m,O,g=n(0),y=n.n(g),w=n(10),k=n.n(w),I=n(9),S=n(16),U=n.n(S),P=n(29),L=n(2),z=n(3),J=n(30),_=n.n(J),C=function(e){return _.a.get("https://api.adzuna.com/v1/api/jobs/gb/search/1?app_id=".concat("041d53c8","&app_key=").concat("6db8813c6cff51c2717428ba63b7feac","&results_per_page=20&what=").concat(e.jobTitle,"&where=").concat(e.location,"&distance=").concat(e.searchRadius),{headers:{"content-type":"application/json"}}).then((function(e){return e.data}))},D=n(11),R=n(6),T=n.n(R),E={jobList:{count:0,mean:0,results:[],topClass:""},search:{location:"",jobTitle:"",searchRadius:0},selectedJobItem:void 0,mapView:{center:[51.507222,-.12755],zoom:12},jobPopUp:!1,hoverPopUp:{isDisplayed:!1,title:"",company:"",coords:[0,0]}},H=Object(D.b)({name:"appSlice",initialState:E,reducers:{setSearch:function(e,t){var n=t.payload;e.search.location=n.location,e.search.jobTitle=n.jobTitle.split(" ").join("%20"),e.search.searchRadius=n.searchRadius},setJobList:function(e,t){var n=t.payload;e.jobList=n.response},setSelectedJobItem:function(e,t){var n=t.payload,i=e.jobList.results.findIndex((function(e){return e.id===n.id}));e.selectedJobItem=e.jobList.results[i],void 0===e.selectedJobItem.longitude?alert("No coordinates for this job"):e.mapView.center=[e.selectedJobItem.latitude,e.selectedJobItem.longitude],e.jobPopUp=!0},updatePopUpState:function(e,t){var n=t.payload;e.jobPopUp=n.click},updateHoverPopUpState:function(e,t){var n=t.payload,i=e.jobList.results.findIndex((function(e){return e.id===n.id}));e.hoverPopUp.isDisplayed=n.event,e.hoverPopUp.title=T()(e.jobList.results[i].title),e.hoverPopUp.company=e.jobList.results[i].company.display_name,e.hoverPopUp.coords=[e.jobList.results[i].latitude,e.jobList.results[i].longitude],console.log(e.jobPopUp)}}}),M=H.actions,V=M.setSearch,B=M.setJobList,A=M.setSelectedJobItem,F=M.updatePopUpState,N=M.updateHoverPopUpState,q=H.reducer,G=(n(27),function(e){return 100*Math.round(e/100)}),K=n(1),Q=z.a.div(i||(i=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  height: 100px;\n  margin-top: 10px;\n  padding: 10px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  justify-content: space-around;\n  transition: 0.3s;\n  :hover {\n    box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;\n  }\n"]))),W=z.a.div(o||(o=Object(L.a)(["\n  font-weight: 400;\n  font-size: 20px;\n"]))),X=function(e){var t=e.item,n=e.submitID,i=e.submitEvent;return Object(K.jsxs)(Q,{onClick:function(){n(t.id),i(!0,t.id)},children:[Object(K.jsx)(W,{children:T()(t.title)}),Object(K.jsx)("div",{children:T()(t.company.display_name)}),Object(K.jsxs)("div",{children:["\xa3",G(t.salary_min)+" "," - \xa3",G(t.salary_max)]})]})},Y=z.a.div(c||(c=Object(L.a)(["\n  position: relative;\n  display: inline-block;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: flex-start;\n  top: 320px;\n  z-index: 5;\n"]))),Z=function(e){var t=e.jobs,n=e.submitID,i=e.submitEvent;return Object(K.jsx)(Y,{children:t.map((function(e){return Object(K.jsx)(X,{item:e,submitID:n,submitEvent:i},e.id)}))})},$=n(12),ee=z.a.div(a||(a=Object(L.a)(["\n  height: 50px;\n  width: 220px;\n  background: white;\n  padding: 10px;\n  border-radius: 10px;\n  box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n"]))),te=z.a.div(r||(r=Object(L.a)(["\n  font-size: 15px;\n"]))),ne=z.a.div(s||(s=Object(L.a)(["\n  font-size: 12px;\n"]))),ie=function(e){var t=e.title,n=e.company;return Object(K.jsxs)(ee,{children:[Object(K.jsx)(te,{children:t}),Object(K.jsx)(ne,{children:n})]})},oe=z.a.div(p||(p=Object(L.a)(["\n  position: fixed;\n  /* left: 25%; */\n  width: 120%;\n  height: 100%;\n"]))),ce=function(e,t,n,i){return"https://api.maptiler.com/maps/streets/256/".concat(n,"/").concat(e,"/").concat(t).concat(i>=2?"@2x":"",".png?key=").concat("tLsFLpESk6ikup9Az8ia")},ae=function(e){var t=e.points,n=e.center,i=e.zoom,o=e.submitIDClick,c=e.submitIDHover,a=e.hoverPopUp,r=e.popUp;return Object(K.jsx)(oe,{children:Object(K.jsxs)($.a,{center:n,zoom:i,provider:ce,children:[t.map((function(e){return Object(K.jsx)($.b,{anchor:e.coords,color:"#3875c9",onClick:function(){return o(e.id)},onMouseOver:function(){return c(!0,e.id)},onMouseOut:function(){return c(!1,e.id)}},e.id)})),a.isDisplayed||r?Object(K.jsx)($.c,{anchor:a.coords,offset:[120,100],children:Object(K.jsx)(ie,{title:a.title,company:a.company})}):null]})})},re=n(13),se=z.a.form(d||(d=Object(L.a)(["\n  position: fixed;\n  height: 300px;\n  width: 400px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: flex;\n  border-radius: 0 0 10px 10px;\n  box-shadow: rgba(7, 6, 6, 0.2) 0px 2px 8px 0px;\n  z-index: 10;\n  padding: 10px;\n"]))),pe=z.a.input(l||(l=Object(L.a)(["\n  height: 30px;\n  font-size: 20px;\n  border: none;\n  border-bottom: 1px solid grey;\n  outline: none;\n"]))),de=z.a.div(u||(u=Object(L.a)(["\n  font-size: 30px;\n  font-weight: 400;\n  padding: 10px 0px;\n  border-bottom: 1px solid lightgrey;\n  letter-spacing: 9.5px;\n"]))),le=z.a.div(b||(b=Object(L.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),ue=z.a.input(j||(j=Object(L.a)(["\n  width: 50px;\n"]))),be=function(e){var t=e.submit,n=y.a.useState(""),i=Object(re.a)(n,2),o=i[0],c=i[1],a=y.a.useState(""),r=Object(re.a)(a,2),s=r[0],p=r[1],d=y.a.useState(0),l=Object(re.a)(d,2),u=l[0],b=l[1];return Object(K.jsxs)(se,{onSubmit:function(e){e.preventDefault(),t({location:o,jobTitle:s,searchRadius:u})},children:[Object(K.jsx)(de,{children:"JOB SEARCH"}),Object(K.jsx)("div",{children:"Location"}),Object(K.jsx)(pe,{type:"text",placeholder:"Location",value:o,onChange:function(e){return c(e.target.value)}}),Object(K.jsx)("div",{children:"Job Title"}),Object(K.jsx)(pe,{type:"text",placeholder:"Job Title",value:s,onChange:function(e){return p(e.target.value)}}),Object(K.jsxs)(le,{children:[Object(K.jsx)("div",{children:"Search Radius km"}),Object(K.jsx)(ue,{type:"number",placeholder:"Search Radius",value:u,onChange:function(e){return b(parseInt(e.target.value))}}),Object(K.jsx)("button",{type:"submit",children:"Search"})]})]})},je=z.a.div(x||(x=Object(L.a)(["\n  width: 400px;\n  position: fixed;\n  top: 330px;\n  height: 60%;\n  z-index: 10;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 10px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  padding: 10px;\n"]))),xe=z.a.div(h||(h=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n  height: 600px;\n  justify-content: space-between;\n  background: white;\n  padding: 10px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n"]))),he=z.a.div(f||(f=Object(L.a)(["\n  font-size: 30px;\n  font-weight: 400;\n  padding: 10px 0px;\n  border-bottom: 1px solid lightgrey;\n"]))),fe=z.a.button(v||(v=Object(L.a)(["\n  align-self: flex-end;\n  width: 50px;\n"]))),ve=function(e){var t=e.job,n=e.onClick;return Object(K.jsx)(je,{children:t?Object(K.jsxs)(xe,{children:[Object(K.jsx)(he,{children:T()(t.title)}),Object(K.jsx)("div",{children:T()(t.company.display_name)}),Object(K.jsx)("div",{children:T()(t.location.display_name)}),Object(K.jsx)("div",{children:T()(t.description)}),Object(K.jsx)("div",{children:T()(t.contract_type)}),Object(K.jsxs)("div",{children:[G(t.salary_min)," -"," ",G(t.salary_max)]}),Object(K.jsx)(fe,{onClick:function(){return n(!1)},children:"Back"})]}):null})},me=z.a.div(m||(m=Object(L.a)(["\n  display: flex;\n  width: 100vw;\n  height: 100%;\n"]))),Oe=z.a.div(O||(O=Object(L.a)(["\n  position: relative;\n  width: 25%;\n  height: 100%;\n  margin-left: 10px;\n"])));var ge=function(e){return e.state},ye=function(){var e,t=Object(I.b)(),n=Object(I.c)(ge);return y.a.useEffect((function(){function e(){return(e=Object(P.a)(U.a.mark((function e(n){var i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(n);case 3:i=e.sent,t(B({response:i})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(n.search)}),[t,n.search]),Object(K.jsxs)(me,{children:[Object(K.jsxs)(Oe,{children:[Object(K.jsx)(be,{submit:function(e){var n=e.location,i=e.jobTitle,o=e.searchRadius;t(V({location:n,jobTitle:i,searchRadius:o}))}}),n.jobPopUp?Object(K.jsx)(ve,{job:n.selectedJobItem,onClick:function(e){t(F({click:e}))}}):Object(K.jsx)(Z,{jobs:n.jobList.results,submitID:function(e){return t(A({id:e}))},submitEvent:function(e,n){return t(N({event:e,id:n}))}})]}),Object(K.jsx)(ae,{points:(e=n.jobList.results,e.map((function(e){return{id:e.id,coords:[e.latitude,e.longitude]}}))),center:n.mapView.center,zoom:n.mapView.zoom,submitIDClick:function(e){return t(A({id:e}))},submitIDHover:function(e,n){return t(N({event:e,id:n}))},hoverPopUp:n.hoverPopUp,popUp:n.jobPopUp})]})},we=Object(D.a)({reducer:{state:q}});k.a.render(Object(K.jsx)(I.a,{store:we,children:Object(K.jsx)(y.a.StrictMode,{children:Object(K.jsx)(ye,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a92ea175.chunk.js.map